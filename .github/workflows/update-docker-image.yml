name: Publish Docker

on: [push]
#on:
#  push:
#    branches:
#      - master
#  schedule:
#    - cron: '0 2 * * 0'

jobs:
  publish:
    runs-on: ubuntu-20.04
    environment: Docker Deploy
    strategy:
      matrix:
        #rust_version: [1.50.0, 1.51.0, 1.52.0, 1.52.1, beta, nightly, stable]
        rust_version: [beta, nightly, stable]
    steps:
      - uses: actions/checkout@v2
      - name: Publish to Registry
        uses: elgohr/Publish-Docker-Github-Action@master
        env:
          RUST_VERSION: ${{ matrix.rust_version }}
        with:
          name: rnestler/archlinux-rust
          username: ${{ secrets.DOCKER_USER }}
          password: ${{ secrets.DOCKER_TOKEN }}
          tags: ${{ matrix.rust_version }}
          buildargs: RUST_VERSION
